var odd,timer,mapster_layer,blink_time_interval=500;function initMapSter(){console.log("before init mapster"),$("#deviceSiteImg").mapster({fillColor:"ff0000",fillOpacity:.4,mapKey:"data-key"}).mapster("set",!0,"room,prtg"),console.log("after init mapster")}function enableMapSter1Layer(){mapster_layer=1,$("#deviceSiteImg").mapster("unbind"),$("#deviceSiteImg").mapster({fillColor:"ff0000",fillOpacity:.4,mapKey:"data-key"}).mapster("set",!0,"room"),blinkMapSter()}function enableMapSter2Layer(){mapster_layer=2,$("#deviceSiteImg").mapster("unbind"),$("#deviceSiteImg").mapster({fillColor:"ff0000",fillOpacity:.4,mapKey:"data-key"}).mapster("set",!0,"prtg"),blinkMapSter()}function blinkMapSter(){0==odd%2?showMapSter():hideMapSter(),odd++,timer=setTimeout(function(){blinkMapSter()},blink_time_interval)}function showMapSter(){1===mapster_layer?$("area[data-key='room']").mapster("select"):2===mapster_layer&&$("area[data-key='prtg']").mapster("select")}function hideMapSter(){1===mapster_layer?$("area[data-key='room']").mapster("deselect"):2===mapster_layer&&$("area[data-key='prtg']").mapster("deselect")}function jumpTo(e,a){odd=0,clearTimeout(timer);var t="";switch(e){case"MAIN":t=_ctx+"/resources/images/dashboard/left_top.png";break;case"ROOM":t=_ctx+"/resources/images/dashboard/left_top_2.png";break;case"PRTG":t=_ctx+"/resources/images/dashboard/alarm_2.png"}$("#deviceSiteImg").fadeTo(200,.3,function(){$("#label_deviceSiteImg").hide(),"PRTG"===e?($("#deviceSiteImg").hide(),$("div[id^=mapster_wrap]").hide()):($("#prtgIframe").hide(),$("#deviceSiteImg").attr("src",t))}).fadeTo(200,1,function(){switch(e){case"MAIN":$("#deviceSiteImg").show(),enableMapSter1Layer();break;case"ROOM":$("#deviceSiteImg").show(),$("#label_deviceSiteImg").show(),enableMapSter2Layer();break;case"PRTG":$("#prtgIframe").show(),$("#label_deviceSiteImg").show()}2===a?$("#a_deviceSiteImg").attr("onclick","jumpTo('MAIN', 1)"):3===a&&$("#a_deviceSiteImg").attr("onclick","jumpTo('ROOM', 2)")})}$(document).ready(function(){odd=0,timer=null,enableMapSter1Layer()});