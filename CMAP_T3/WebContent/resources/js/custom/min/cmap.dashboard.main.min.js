const MAP_ALL="ALL",MAP_BUILDING="BUILDING",MAP_FLOOR="FLOOR",MAP_ROOM="ROOM";var odd,timer,mapster_layer,current_layer,next_layer,blink_time_interval=500;function initMapSter(){console.log("after init mapster")}function enableMapSter4Layer1(){console.log("----- enableMapSter4Layer1 -----"),mapster_layer=1,$("#mapImg").mapster("unbind"),$("#mapImg").mapster({fillColor:"ff0000",fillOpacity:.4,mapKey:"data-building"}).mapster("set",!0,"building"),blinkMapSter()}function enableMapSter4Layer2(){console.log("----- enableMapSter4Layer2 -----"),mapster_layer=2,$("#mapImg").mapster("unbind"),$("#mapImg").mapster({fillColor:"ff0000",fillOpacity:.4,mapKey:"data-floor"}).mapster("set",!0,"floor"),blinkMapSter()}function enableMapSter4Layer3(){console.log("----- enableMapSter4Layer3 -----"),mapster_layer=3,$("#mapImg").mapster("unbind"),$("#mapImg").mapster({fillColor:"ff0000",fillOpacity:.4,mapKey:"data-room"}).mapster("set",!0,"room"),blinkMapSter()}function blinkMapSter(){0==odd%2?showMapSter():hideMapSter(),odd++,timer=setTimeout(function(){blinkMapSter()},blink_time_interval)}function showMapSter(){1===mapster_layer?$("area[data-building='building']").mapster("select"):2===mapster_layer?$("area[data-floor='floor']").mapster("select"):3===mapster_layer&&$("area[data-room='room']").mapster("select")}function hideMapSter(){1===mapster_layer?$("area[data-building='building']").mapster("deselect"):2===mapster_layer?$("area[data-floor='floor']").mapster("deselect"):3===mapster_layer&&$("area[data-room='room']").mapster("deselect")}function fadeOutControl(e){$("#label_mapImg").hide(),$("#buildingFrames").hide(),$("#floorFrames").hide(),e===MAP_ROOM?($("#mapImg").hide(),$("div[id^=mapster_wrap]").hide()):($("#prtgIframe").hide(),$("div[id^=mapster_wrap]").hide(),$("#mapImg").attr("src",""))}function changeView2Layer1(){current_layer===MAP_ALL?(jumpToUrl=_ctx+"/resources/images/dashboard/map_layer_1.png",$("#mapImg").show(),enableMapSter4Layer1()):current_layer===MAP_BUILDING&&($("#mapster_wrap_0").hide(),$("#buildingFrames").hide(),$("#floorFrames").hide(),$("#prtgImgFrame").animate({height:"325px"},{duration:"normal",complete:function(){$("[data-sec=prtg]").animate({width:"820px"},{duration:"normal",complete:function(){jumpToUrl=_ctx+"/resources/images/dashboard/map_layer_1.png",$("#mapImg").fadeIn("normal",function(){$(this).attr({src:jumpToUrl,width:"820px",height:"325px",display:"inline"}),enableMapSter4Layer1(),$("#label_mapImg").hide(),$("#bread").text(""),$("[data-sec=others]").fadeIn("normal")})}})}}))}function changeView2Layer2(){current_layer!==MAP_ALL&&current_layer!==MAP_FLOOR||($("[data-sec=others]").hide(),$("#mapster_wrap_0").hide(),$("#floorFrames").hide(),jumpToUrl=_ctx+"/resources/images/dashboard/map_layer_2.jpg",current_layer===MAP_ALL?$("[data-sec=prtg]").animate({width:"1180px"},{duration:"normal",complete:function(){$("#prtgImgFrame").animate({height:"580px"},{duration:"normal",complete:function(){$("#mapImg").fadeIn("normal",function(){$(this).attr({src:jumpToUrl,width:"auto",height:"580px",display:"inline"}),enableMapSter4Layer2(),$("#label_mapImg").show(),$("#bread").text("機場 > 第三航廈")}),$("#buildingFrames").fadeIn("normal")}})}}):current_layer===MAP_FLOOR&&$("#mapImg").fadeIn("normal",function(){$(this).attr({src:jumpToUrl,width:"auto",height:"580px",display:"inline"}),enableMapSter4Layer2(),$("#label_mapImg").show(),$("#bread").text("機場 > 第三航廈"),$("#buildingFrames").fadeIn("normal")}),$("#a_mapImg").attr("onclick","jumpTo('BUILDING', 'ALL', 1)"))}function changeView2Layer3(){current_layer!==MAP_BUILDING&&current_layer!==MAP_ROOM||($("[data-sec=others]").hide(),$("#mapster_wrap_0").hide(),$("#buildingFrames").hide(),current_layer===MAP_ROOM&&$("#prtgIframe").hide(),jumpToUrl=_ctx+"/resources/images/dashboard/map_layer_3.png",$("#mapImg").fadeIn("normal",function(){$(this).attr({src:jumpToUrl,width:"1180px",height:"395px",display:"inline"}),enableMapSter4Layer3(),$("#label_mapImg").show(),$("#bread").text("機場 > 第三航廈 > 3F(入境層)"),$("#floorFrames").fadeIn("normal")}),$("#a_mapImg").attr("onclick","jumpTo('FLOOR', 'BUILDING', 2)"))}function changeView2Layer4(){current_layer===MAP_FLOOR&&($("[data-sec=others]").hide(),$("#mapster_wrap_0").hide(),$("#buildingFrames").hide(),$("#floorFrames").hide(),$("#prtgIframe").fadeIn("normal",function(){$(this).attr({width:"100%",height:"100%",display:"inline"}),$("#label_mapImg").show(),$("#bread").text("機場 > 第三航廈 > 3F(入境層) > 網路網路")}),$("#a_mapImg").attr("onclick","jumpTo('ROOM', 'FLOOR', 2)"))}function fadeInControl(e,a){switch(e){case MAP_ALL:changeView2Layer1();break;case MAP_BUILDING:changeView2Layer2();break;case MAP_FLOOR:changeView2Layer3();break;case MAP_ROOM:changeView2Layer4()}}function jumpTo(e,a,r){odd=0,clearTimeout(timer);current_layer=e,next_layer=a,$("#mapImg").fadeTo(200,.3,function(){fadeOutControl(a)}).fadeTo(200,1,function(){fadeInControl(a,r)})}$(document).ready(function(){odd=0,timer=null,current_layer=MAP_ALL,next_layer=MAP_ALL,$("area[data-building]").hide(),$("area[data-floor]").hide(),$("area[data-room]").hide(),enableMapSter4Layer1()});