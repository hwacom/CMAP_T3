var currentDiffPos=-1,diffPos=[],diff=$("meta[name='diff']").attr("content");function changeCompareDesc(o){o?$("#compareModal_summary").html("共 "+diffPos.length+" 個差異；第 "+(currentDiffPos+1)+" 個差異點"):$("#compareModal_summary").html("共 "+diffPos.length+" 個差異")}$(document).ready(function(){null!=(diffPos=diff.split(","))&&diffPos.length>0?$("#compareModal_summary").html("共 "+diffPos.length+" 個差異"):$("#compareModal_summary").html("無差異");var o=$("div[id$='compareModal_contentLeft']").add($("div[id$='compareModal_contentRight']")).add($("div[id$='compareModal_contentLineNum']"));o.on("scroll",function(){o.scrollTop($(this).scrollTop())}),$("#compareModal_contentLineNum").scroll(function(){var o=$("#compareModal_contentLineNum").scrollTop(),e=$("#compareModal_contentLineNum").prop("offsetHeight"),c=$("#compareModal_contentLineNum").prop("scrollHeight");0==o?currentDiffPos=-1:o+e==c&&(currentDiffPos=diffPos.length)}),$("#compareModal").on("shown.bs.modal",function(){currentDiffPos=-1,setTimeout(function(){$("#compareModal_contentLineNum").scrollTop(0)},300)}),$("#jumpToTop").click(function(o){$(".diffPos").css("background-color",""),$("#compareModal_contentLineNum").animate({scrollTop:0},"500"),currentDiffPos=-1,$(".diffPos").removeClass("compare-current-pos"),changeCompareDesc(!1)}),$("#jumpToPre").click(function(o){currentDiffPos<=0?currentDiffPos=diffPos.length-1:currentDiffPos-=1,$("#compareModal_contentLineNum").animate({scrollTop:$(".diffPos")[currentDiffPos].offsetTop},"500"),$(".diffPos").removeClass("compare-current-pos"),$(".diffPos").eq(currentDiffPos).addClass("compare-current-pos"),changeCompareDesc(!0)}),$("#jumpToNext").click(function(o){currentDiffPos+1>=diffPos.length?currentDiffPos=0:currentDiffPos+=1,$("#compareModal_contentLineNum").animate({scrollTop:$(".diffPos")[currentDiffPos].offsetTop},"500"),$(".diffPos").removeClass("compare-current-pos"),$(".diffPos").eq(currentDiffPos).addClass("compare-current-pos"),changeCompareDesc(!0)}),$("#jumpToBottom").click(function(o){$(".diffPos").css("background-color","");var e=$("#compareModal_contentLineNum").prop("offsetHeight"),c=$("#compareModal_contentLineNum").prop("scrollHeight");$("#compareModal_contentLineNum").animate({scrollTop:c-e},"500"),$(".diffPos").removeClass("compare-current-pos"),changeCompareDesc(!1)})});